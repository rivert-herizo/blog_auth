const email = req.body.email;
    const password = req.body.password;
    const username = req.body.username;

    try  {
        const result = await db.query('SELECT * FROM users WHERE email = $1', [email]);
        if (result.rows.length > 0) {
            res.redirect('/login');
        } else {
            bcrypt.hash(password, saltRound, async  (error, hash) => {
                if(error) {
                    console.error('Error hqshing password:', error);
                } else {
                    const insertQuery = await db.query('INSERT INTO users (email, password, name) VALUES ($1, $2, $3) RETURNING *', [email, hash, username]);
                    const user = insertQuery.rows[0];
                    res.redirect('/login');
                }
            })
        }
    }
    catch (error) {
        console.error('Error checking user:', error);
    }